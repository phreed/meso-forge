# yaml-language-server: $schema=https://raw.githubusercontent.com/prefix-dev/recipe-format/main/schema.json
schema_version: 1

context:
  version: "0.0.11_alpha.1"

package:
  name: iamb
  version: ${{ version }}

source:
  url: https://github.com/ulyssa/iamb/archive/refs/heads/main.tar.gz
  sha256: 6be8c76aaca45f7971bcb542b1d12f26cd5f2c6266202de6433d768034e62fc7

build:
  number: 0
  script: |
    export LIBSQLITE3_SYS_USE_PKG_CONFIG="1"
    export VERGEN_GIT_SHA=${{ env.get('CONDA_PREFIX') }}
    cargo install --root $PREFIX --path .

requirements:
  build:
    - pkgconf
    - rust
  host:
    - sqlite
  run:
    - if: linux
      then:
        - openssl

tests:
  - script: |
      iamb --version

about:
  homepage: https://iamb.chat
  license: Apache-2.0
  license_file:
    - LICENSE
  summary: Matrix client for Vim addicts
  description: |
    iamb is a Matrix client for the terminal that uses Vim keybindings.
  repository: https://github.com/ulyssa/iamb

extra:
  recipe-maintainers:
    - phreed
