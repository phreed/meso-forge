# yaml-language-server: $schema=https://raw.githubusercontent.com/prefix-dev/recipe-format/main/schema.json
schema_version: 1

context:
  version: 2.2.1
  python_min: 3.11.0

package:
  name: freetakserver-ui
  version: ${{ version }}

source:
  url: https://github.com/FreeTAKTeam/UI/archive/refs/tags/v${{ version }}.tar.gz
  sha256: 05b4d286d3f67b4bd359972adaa1b6e912a5ef1f8df7a93eb72ab5b06f21ed31

build:
  noarch: python
  script: pip install . -v

requirements:
  host:
    - pip
    - python ==${{ python_min }}
    - poetry-core
  run:
    - python >=${{ python_min }},<4.0.0
    - alembic 1.13.1.*
    - blinker 1.7.0.*
    - certifi 2024.2.2.*
    - charset-normalizer 3.3.2.*
    - click 8.1.7.*
    - colorama >= 0.4.6
    - dnspython 2.6.1.*
    - email_validator 2.1.1.*
    - eventlet 0.35.2.*
    - flask 3.0.2.*
    - flask-cors 4.0.0.*
    - flask-login 0.6.3.*
    - flask-migrate 4.0.6.*
    - flask-sqlalchemy 3.1.1.*
    - flask-wtf 1.2.1.*
    - greenlet 3.1.1.*
    - gunicorn 21.2.0.*
    - idna 3.6.*
    - itsdangerous 2.1.2.*
    - jinja2 3.1.3.*
    - mako 1.3.2.*
    - markupsafe 2.1.5.*
    - packaging 24.0.*
    - python-decouple 3.8.*
    - requests 2.31.0.*
    - sqlalchemy 2.0.38.*
    - sqlalchemy-utils 0.41.1.*
    - typing_extensions 4.10.0.*
    - urllib3 2.2.1.*
    - werkzeug 3.0.1.*
    - wtforms 2.3.3.*

tests:
  # Test 1: Verify package contents are included
  - package_contents:
      files:
        # Python library package
        - site-packages/freetakserver_ui/

  # Test 2: Python import test
  - script:
      interpreter: python
      content: |
        # Test basic imports
        import freetakserver_ui

about:
  homepage: https://github.com/FreeTAKTeam/UI
  summary: An optional UI for FreeTAKServer
  description: |
    This FreeTAKServer UI repository hosts the web user interface for the FreeTAKServer project.
    It is built using Python with Flask,
    employing additional technologies such as SQLite for database management,
    Alembic for database schema migrations,
    and Flask_Login for session-based authentication.
    The UI supports various features like modular design through Flask Blueprints,
    forms validation, and provides a dashboard for server management.
    The front-end utilizes HTML, CSS, SCSS, and JavaScript,
    making it a comprehensive tool for administrators to manage the FreeTAKServer.
    The project is licensed under the EPL/MIT License.
  license: MIT
  license_file:
    - LICENSE.txt
  documentation: https://freetakteam.github.io/FreeTAKServer-User-Docs/
  repository: https://github.com/FreeTAKTeam/UI

extra:
  recipe-maintainers:
    - phreed
